<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      >
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0;">
    <meta name="description" content="fresh Gray Bootstrap 3.0 Responsive Theme " />
    <meta name="keywords" content="Template, Theme, web, html5, css3, Bootstrap,Bootstrap 3.0 Responsive Login" />
    <meta name="author" content="Adsays" />
    <link rel="shortcut icon" href="favicon.png">

    <title>Connexion</title>
    <link href="../Content/toastr.css" rel="stylesheet" />

    <link href="../Content/stylelogin.css" rel="stylesheet" />
    <link href="../Content/animate-custom.css" rel="stylesheet" />
    <link href="../Content/bootstrap.css" rel="stylesheet" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
<!--
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]&ndash;&gt;

    <script src="js/custom.modernizr.js" type="text/javascript"></script>
-->

</head>
<body class="fade-in" ng-controller="AdminCtrl">

<!-- start Login box -->
<div class="container" id="login-block">
    <div class="row">
        <div class="col-sm-6 col-md-4 col-sm-offset-3 col-md-offset-4">

            <div class="login-box clearfix animated flipInY">
                <div class="page-icon animated bounceInDown">
                    <img src="../Content/images/login-key-icon.png" alt="Key icon" />
                </div>

                <div class="login-logo">
                    <a href="#"><img src="../Content/images/gps2.jpg" style="width:70%" /></a>
                </div>
                <hr />
                <div class="login-form">
                    <form>
                        <input type="text" placeholder="Utilisateur" ng-model="username" class="input-field" name="username" required />
                        <input type="password" placeholder="Mot de passe" ng-model="password" class="input-field" name="password" required />


                        <a href="#" ng-click="login()" class="btn btn-login">Connexion</a>
                    </form>
                </div>

            </div>
        </div>


        </form>
    </div>
</div>

<footer class="container">
    <p id="footer-text"><small>Copyright &copy; 2016 <a href="#">JEBLI Yassine</a></small></p>
</footer>
<script src="../Content/js/jquery-1.11.2.min.js"></script>
<script src="../Scripts/angular.min.js"></script>
<script src="../Scripts/angular-touch.min.js"></script>
<script src="../Scripts/angular-resource.min.js"></script>
<script src="../Scripts/angular-animate.min.js"></script>
<script src="../Scripts/angular-ui/ui-bootstrap.min.js"></script>
<script src="../Scripts/angular-ui/ui-bootstrap-tpls.min.js"></script>
<script src="../Scripts/i18n/angular-locale_fr-ma.js"></script>
<script src="../Scripts/toastr.min.js"></script>
<script src="../Scripts/angular-file-upload.min.js"></script>
<script src="../Scripts/breeze.min.js"></script>
<script src="../Scripts/ui-grid-unstable.min.js"></script>
<script src="../Scripts/App/app.js"></script>
<script>
    $(document).ready(function () {

        app.controller("AdminCtrl", ['$location','$scope', '$http', '$element', 'Animations', 'uiGridConstants', '$timeout', '$interval', '$attrs', 'crudGridDataFactory', 'notificationFactory', 'lookupFactory', function ($location,$scope, $http, $element, Animations, uiGridConstants, $timeout, $interval, $attrs, crudGridDataFactory, notificationFactory,lookupFactory) {

            $scope.login = function()
            {
                event.preventDefault();
                var data = 'username=' + $scope.username + '&password=' + $scope.password;
                $.ajax({
                    data: data,
                    timeout: 1000,
                    type: 'POST',
                    url: '/login'
                }).done(function(data, textStatus, jqXHR) {
                    window.location = "/";

                }).fail(function(jqXHR, textStatus, erreur) {
                    console.log('erreuuuuuuuuuuuuur !!!'+erreur);
                });
            }
        }]);
        angular.bootstrap(document, ['AdminModule']);

    });
</script>
</body>
</html>
